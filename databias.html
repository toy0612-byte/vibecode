<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•¼ì˜¹ì´ íƒì • AI: ë°ì´í„° í¸í–¥ í•™ìŠµ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Jua', sans-serif;
            background-color: #FFF7ED; /* ë”°ëœ»í•œ ì˜¤ë Œì§€ ë°°ê²½ */
            user-select: none;
        }
        .emoji-big {
            font-size: 8rem;
            line-height: 1;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }
        .btn-game {
            transition: all 0.1s;
        }
        .btn-game:active {
            transform: scale(0.95);
        }
        .robot-bounce {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* AI ìƒê° ë§í’ì„  */
        .thought-bubble {
            position: relative;
            background: #fff;
            border-radius: .4em;
        }
        .thought-bubble:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: #fff;
            border-bottom: 0;
            margin-left: -10px;
            margin-bottom: -10px;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- ê²Œì„ ì»¨í…Œì´ë„ˆ -->
    <div class="w-full max-w-lg bg-white rounded-3xl shadow-2xl overflow-hidden border-4 border-orange-300 relative">
        
        <!-- ìƒë‹¨ í—¤ë”: ë¡œë´‡ ìƒíƒœ -->
        <div class="bg-orange-100 p-6 flex items-center justify-between border-b-2 border-orange-200">
            <div class="flex items-center gap-4">
                <div class="text-5xl robot-bounce">ğŸ¤–</div>
                <div>
                    <h2 class="text-2xl text-orange-600">ì•¼ì˜¹ì´ íƒì • AI</h2>
                    <p id="ai-status" class="text-sm text-gray-500">ìƒíƒœ: ì´ˆê¸°í™” ë¨</p>
                </div>
            </div>
            <div class="text-right">
                <p class="text-xs text-gray-500">í•™ìŠµ ì§„í–‰ë„</p>
                <div class="w-24 h-4 bg-white rounded-full border border-gray-300 overflow-hidden">
                    <div id="progress-bar" class="h-full bg-green-500 w-0 transition-all duration-300"></div>
                </div>
            </div>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
        <div id="game-area" class="p-8 text-center min-h-[400px] flex flex-col items-center justify-center">
            
            <!-- 1. ì¸íŠ¸ë¡œ í™”ë©´ -->
            <div id="screen-intro" class="fade-in">
                <h1 class="text-3xl text-gray-800 mb-4">AIë¥¼ í›ˆë ¨ì‹œì¼œì£¼ì„¸ìš”!</h1>
                <p class="text-lg text-gray-600 mb-6 break-keep">
                    ì´ ë¡œë´‡ì€ <strong>'ê³ ì–‘ì´'</strong>ê°€ ë¬´ì—‡ì¸ì§€ ëª¨ë¦…ë‹ˆë‹¤.<br>
                    ì—¬ëŸ¬ë¶„ì´ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ê³  ê³ ì–‘ì´ì¸ì§€ ì•„ë‹Œì§€ ê°€ë¥´ì³ì£¼ì„¸ìš”.
                </p>
                <button onclick="startTraining('biased')" class="bg-orange-500 hover:bg-orange-600 text-white text-2xl py-3 px-10 rounded-2xl btn-game shadow-lg">
                    í›ˆë ¨ ì‹œì‘í•˜ê¸° â–¶ï¸
                </button>
            </div>

            <!-- 2. í•™ìŠµ í™”ë©´ (íŠ¸ë ˆì´ë‹) -->
            <div id="screen-train" class="hidden fade-in w-full">
                <p class="text-xl text-gray-500 mb-2">ì´ ì‚¬ì§„ì€ ê³ ì–‘ì´ì¸ê°€ìš”?</p>
                
                <div class="bg-gray-50 rounded-2xl py-10 mb-6 border-2 border-dashed border-gray-300">
                    <div id="train-emoji" class="emoji-big">ğŸˆ</div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <button onclick="trainAI(true)" class="bg-blue-100 hover:bg-blue-200 border-2 border-blue-400 text-blue-700 text-xl py-4 rounded-xl btn-game">
                        ğŸ™†â€â™‚ï¸ ë„¤! (ê³ ì–‘ì´)
                    </button>
                    <button onclick="trainAI(false)" class="bg-red-100 hover:bg-red-200 border-2 border-red-400 text-red-700 text-xl py-4 rounded-xl btn-game">
                        ğŸ™…â€â™€ï¸ ì•„ë‹ˆìš”!
                    </button>
                </div>
            </div>

            <!-- 3. í…ŒìŠ¤íŠ¸/ê²°ê³¼ í™”ë©´ (AIì˜ íŒë‹¨) -->
            <div id="screen-test" class="hidden fade-in w-full">
                <div class="mb-6">
                    <p class="text-gray-500 mb-2">AIê°€ ë°°ìš´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ íŒë‹¨ ì¤‘...</p>
                    <div class="thought-bubble bg-gray-100 p-4 mb-4 shadow-sm border border-gray-200">
                        <p id="ai-thought" class="text-xl text-purple-600 font-bold">ìŒ... ì´ê±´...</p>
                    </div>
                </div>

                <div class="bg-white rounded-full w-40 h-40 flex items-center justify-center mx-auto mb-6 border-4 border-gray-200 shadow-inner">
                    <div id="test-emoji" class="emoji-big">ğŸˆâ€â¬›</div>
                </div>

                <div id="test-result-msg" class="text-2xl font-bold mb-6 text-gray-800"></div>

                <button id="btn-next-step" class="hidden bg-green-500 text-white py-3 px-8 rounded-xl text-xl shadow-md btn-game hover:bg-green-600">
                    ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ê¸° â¡ï¸
                </button>
            </div>

            <!-- 4. í¸í–¥ ì„¤ëª… ë° ì¬í•™ìŠµ ì œì•ˆ -->
            <div id="screen-bias-alert" class="hidden fade-in">
                <div class="text-6xl mb-4">ğŸ˜±</div>
                <h2 class="text-3xl text-red-500 mb-4">ë¬¸ì œê°€ ìƒê²¼ì–´ìš”!</h2>
                <div class="bg-red-50 p-4 rounded-xl border border-red-200 text-left mb-6">
                    <p class="text-lg text-gray-700 mb-2"><strong>AIì˜ ë³€ëª…:</strong></p>
                    <p class="text-gray-600 text-base italic">
                        "ì•„ê¹Œ í›ˆë ¨í•  ë•Œ <strong>ì£¼í™©ìƒ‰ ê³ ì–‘ì´(ğŸˆ)</strong>ë§Œ ë³´ì—¬ì¤¬ì–ì•„ìš”!<br>
                        ê·¸ë˜ì„œ ì €ëŠ” <strong>'ì£¼í™©ìƒ‰'ì´ì–´ì•¼ë§Œ ê³ ì–‘ì´</strong>ë¼ê³  ë°°ì› ì–´ìš”.<br>
                        ê²€ì€ìƒ‰, í°ìƒ‰ì€ ë³¸ ì ì´ ì—†ì–´ì„œ ê³ ì–‘ì´ê°€ ì•„ë‹ˆë¼ê³  ìƒê°í–ˆì–´ìš”."
                    </p>
                </div>
                <p class="text-gray-500 text-sm mb-6">ì´ê²ƒì´ ë°”ë¡œ <strong>ë°ì´í„° í¸í–¥(Bias)</strong>ì…ë‹ˆë‹¤.</p>
                <button onclick="startTraining('diverse')" class="bg-purple-500 hover:bg-purple-600 text-white text-xl py-3 px-8 rounded-2xl btn-game shadow-lg w-full">
                    ë‹¤ì–‘í•œ ê³ ì–‘ì´ë¡œ ë‹¤ì‹œ ê°€ë¥´ì¹˜ê¸°! ğŸ”„
                </button>
            </div>

            <!-- 5. ìµœì¢… ì„±ê³µ í™”ë©´ -->
            <div id="screen-success" class="hidden fade-in">
                <div class="text-6xl mb-4">ğŸ‰</div>
                <h2 class="text-3xl text-green-600 mb-4">í¸í–¥ íƒˆì¶œ ì„±ê³µ!</h2>
                <p class="text-lg text-gray-600 mb-8">
                    ì´ì œ AIëŠ” ìƒ‰ê¹”ì— ìƒê´€ì—†ì´<br>ëª¨ë“  ê³ ì–‘ì´ë¥¼ ì•Œì•„ë³¼ ìˆ˜ ìˆê²Œ ë˜ì—ˆì–´ìš”.<br>
                    <strong>"ë°ì´í„°ëŠ” ë‹¤ì–‘í• ìˆ˜ë¡ ì¢‹ì•„ìš”!"</strong>
                </p>
                <div class="flex justify-center gap-2 mb-8 text-4xl">
                    <span>ğŸˆ</span><span>ğŸˆâ€â¬›</span><span>ğŸ±</span>
                </div>
                <button onclick="location.reload()" class="bg-gray-500 hover:bg-gray-600 text-white py-3 px-8 rounded-xl text-lg btn-game">
                    ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸°
                </button>
            </div>

        </div>
    </div>

    <script>
        // --- ë°ì´í„°ì…‹ ì •ì˜ ---
        // 1. í¸í–¥ëœ ë°ì´í„°ì…‹ (ì£¼í™© ê³ ì–‘ì´ë§Œ ìˆìŒ)
        const biasedDataset = [
            { emoji: "ğŸˆ", isCat: true },
            { emoji: "ğŸ•", isCat: false },
            { emoji: "ğŸˆ", isCat: true },
            { emoji: "ğŸ©", isCat: false },
            { emoji: "ğŸˆ", isCat: true },
            { emoji: "ğŸ¦", isCat: false }
        ];

        // 2. ë‹¤ì–‘í•œ ë°ì´í„°ì…‹ (ê²€ì€ ê³ ì–‘ì´, í° ê³ ì–‘ì´ í¬í•¨)
        const diverseDataset = [
            { emoji: "ğŸˆâ€â¬›", isCat: true },
            { emoji: "ğŸ¶", isCat: false },
            { emoji: "ğŸ±", isCat: true }, // í° ê³ ì–‘ì´ ì–¼êµ´
            { emoji: "ğŸ°", isCat: false },
            { emoji: "ğŸˆ", isCat: true }
        ];

        // 3. í…ŒìŠ¤íŠ¸ìš© ë¬¸ì œ (í¸í–¥ í™•ì¸ìš©)
        const testCaseFailure = { emoji: "ğŸˆâ€â¬›", isCat: true, color: "black" }; 
        const testCaseSuccess = { emoji: "ğŸˆâ€â¬›", isCat: true, color: "black" };

        // --- ìƒíƒœ ë³€ìˆ˜ ---
        let currentPhase = 'intro'; // intro, training, testing, bias_alert, retraining, success
        let trainIndex = 0;
        let currentDataset = [];
        let aiBrain = {
            hasSeenBlackCat: false,
            hasSeenWhiteCat: false
        };

        // --- DOM ìš”ì†Œ ---
        const aiStatus = document.getElementById('ai-status');
        const progressBar = document.getElementById('progress-bar');
        const screens = {
            intro: document.getElementById('screen-intro'),
            train: document.getElementById('screen-train'),
            test: document.getElementById('screen-test'),
            biasAlert: document.getElementById('screen-bias-alert'),
            success: document.getElementById('screen-success')
        };
        const trainEmoji = document.getElementById('train-emoji');
        const aiThought = document.getElementById('ai-thought');
        const testEmoji = document.getElementById('test-emoji');
        const testResultMsg = document.getElementById('test-result-msg');
        const btnNextStep = document.getElementById('btn-next-step');

        // --- í™”ë©´ ì „í™˜ í•¨ìˆ˜ ---
        function showScreen(screenName) {
            Object.values(screens).forEach(el => el.classList.add('hidden'));
            screens[screenName].classList.remove('hidden');
        }

        // --- 1. í›ˆë ¨ ì‹œì‘ ---
        function startTraining(type) {
            trainIndex = 0;
            if (type === 'biased') {
                currentPhase = 'training_biased';
                currentDataset = biasedDataset;
                aiStatus.innerText = "ìƒíƒœ: ì£¼í™©ìƒ‰ ê³ ì–‘ì´ë§Œ ë°°ìš°ëŠ” ì¤‘...";
            } else {
                currentPhase = 'training_diverse';
                currentDataset = diverseDataset;
                aiStatus.innerText = "ìƒíƒœ: ë‹¤ì–‘í•œ ê³ ì–‘ì´ë¥¼ ë°°ìš°ëŠ” ì¤‘...";
                // ì¬í•™ìŠµ ì‹œì—ëŠ” ê²€ì€ ê³ ì–‘ì´ë¥¼ ë³´ê²Œ ë¨
                aiBrain.hasSeenBlackCat = true; 
            }
            showScreen('train');
            updateTrainCard();
        }

        // --- 2. í›ˆë ¨ ì¹´ë“œ ì—…ë°ì´íŠ¸ ---
        function updateTrainCard() {
            if (trainIndex >= currentDataset.length) {
                // í›ˆë ¨ ì¢…ë£Œ -> í…ŒìŠ¤íŠ¸ë¡œ ì´ë™
                setTimeout(startTest, 500);
                return;
            }
            const data = currentDataset[trainIndex];
            trainEmoji.innerText = data.emoji;
            
            // ì§„í–‰ë°” ì—…ë°ì´íŠ¸
            const progress = ((trainIndex) / currentDataset.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // --- 3. ì‚¬ìš©ì ì…ë ¥ (O/X ë²„íŠ¼) ---
        function trainAI(userChoice) {
            // ì—¬ê¸°ì„œëŠ” ì‚¬ìš©ìê°€ ë¬´ì¡°ê±´ ë§ê²Œ ì…ë ¥í•œë‹¤ê³  ê°€ì •í•˜ê±°ë‚˜, 
            // ì •ë‹µì„ ì²´í¬í•´ì¤„ ìˆ˜ë„ ìˆì§€ë§Œ, íë¦„ìƒ ê·¸ëƒ¥ ë„˜ì–´ê°‘ë‹ˆë‹¤.
            // êµìœ¡ì  íš¨ê³¼ë¥¼ ìœ„í•´ ë§ì•˜ëŠ”ì§€ í‹€ë ¸ëŠ”ì§€ ì‹œê°ì  í”¼ë“œë°± ì‚´ì§ ì¤Œ
            
            const currentData = currentDataset[trainIndex];
            // ì •ë‹µ ì—¬ë¶€ ì²´í¬ (UXìš©)
            if (userChoice !== currentData.isCat) {
                alert("ì–´ë¼? ë‹¤ì‹œ ì˜ ë³´ì„¸ìš”! ê³ ì–‘ì´ì¸ê°€ìš”?");
                return;
            }

            trainIndex++;
            updateTrainCard();
        }

        // --- 4. í…ŒìŠ¤íŠ¸ ì‹œì‘ (AIì˜ íŒë‹¨ ì‹œë®¬ë ˆì´ì…˜) ---
        function startTest() {
            progressBar.style.width = "100%";
            showScreen('test');

            if (currentPhase === 'training_biased') {
                // í¸í–¥ëœ í•™ìŠµ í›„ -> ê²€ì€ ê³ ì–‘ì´ í…ŒìŠ¤íŠ¸
                runTestSimulation(testCaseFailure, false); // ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤
            } else {
                // ì¬í•™ìŠµ í›„ -> ê²€ì€ ê³ ì–‘ì´ í…ŒìŠ¤íŠ¸
                runTestSimulation(testCaseSuccess, true); // ì„±ê³µ ì‹œë‚˜ë¦¬ì˜¤
            }
        }

        function runTestSimulation(testData, isSuccessScenario) {
            testEmoji.innerText = testData.emoji;
            testResultMsg.innerText = "";
            btnNextStep.classList.add('hidden');
            aiThought.innerText = "í•™ìŠµí•œ ë‚´ìš©ì´ë‘ ë¹„êµí•˜ëŠ” ì¤‘...";
            aiStatus.innerText = "ìƒíƒœ: íŒë‹¨ ì¤‘...";

            setTimeout(() => {
                if (isSuccessScenario) {
                    // ì„±ê³µ ë¡œì§
                    aiThought.innerText = "ì•„! ì´ê±´ ìƒ‰ê¹”ì€ ë‹¤ë¥´ì§€ë§Œ ê³ ì–‘ì´ì•¼!";
                    testResultMsg.innerHTML = "<span class='text-green-600'>ì •ë‹µ! ì´ê²ƒì€ ê³ ì–‘ì´ì…ë‹ˆë‹¤.</span>";
                    btnNextStep.innerText = "ê²°ê³¼ ë³´ê¸° ğŸ‰";
                    btnNextStep.onclick = () => showScreen('success');
                } else {
                    // ì‹¤íŒ¨ ë¡œì§ (í¸í–¥ ë°œìƒ)
                    aiThought.innerText = "ì–´? ì£¼í™©ìƒ‰ì´ ì•„ë‹ˆë„¤? ì´ê±´ ê³ ì–‘ì´ê°€ ì•„ë‹ˆì•¼!";
                    testResultMsg.innerHTML = "<span class='text-red-500'>ë•¡! AIëŠ” ì´ê²ƒì„ ê³ ì–‘ì´ê°€ ì•„ë‹ˆë¼ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.</span>";
                    btnNextStep.innerText = "ì™œ í‹€ë ¸ì„ê¹Œ? ğŸ¤”";
                    btnNextStep.onclick = () => showScreen('biasAlert');
                }
                btnNextStep.classList.remove('hidden');
            }, 2000);
        }

    </script>
</body>
</html>
